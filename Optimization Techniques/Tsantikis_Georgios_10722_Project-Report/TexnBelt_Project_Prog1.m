% ΘΕΜΑ 2 - Γενετικός Αλγόριθμος (V = 100)
clc; clearvars;

% Ορισμός της τιμής του V
V = 100;

% Ορισμός ανώτερων και κατώτερων ορίων για τη μεταβλητή x
lower_bounds = zeros(1, 17); % Όλα τα κατώτερα όρια είναι 0
upper_bounds = [54.13, 21.56, 34.08, 49.19, 33.05, 21.84, 29.96, 24.87, ...
      47.24, 33.97, 26.89, 32.76, 39.98, 37.12, 53.83, 61.65, 59.73];

upper_bounds = upper_bounds - 0.001; % Μικρή μείωση για αποφυγή ακριβούς επίτευξης του άνω ορίου

% Ορισμός περιορισμών ισότητας (Aeq * x = beq)
Aeq = [-1, -1, -1, -1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0; ...
        0,  1,  0,  0,  0,  0, -1, -1,  0,  0,  0,  0,  0,  0,  0,  0,  0; ...
        0,  0,  0,  1,  0,  0,  0,  0, -1, -1,  0,  0,  0,  0,  0,  0,  0; ...
        1,  0,  0,  0, -1, -1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0; ...
        0,  0,  1,  0,  0,  0,  0,  1,  1,  0, -1, -1, -1,  0,  0,  0,  0; ...
        0,  0,  0,  0,  0,  1,  1,  0,  0,  0,  0,  0,  1, -1, -1,  0,  0; ...
        0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  0,  0,  0,  0,  0, -1; ...
        0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0, -1,  0; ...
        0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  0,  0,  1,  1,  1];

% Ορισμός σταθερών για τους περιορισμούς ισότητας
beq = [-V; 0; 0; 0; 0; 0; 0; 0; V];

% Ορισμός της αντικειμενικής συνάρτησης (συνάρτηση κόστους)
obj_fun = @(x) TexnBelt_Project_Fun1(x, V);

% Επιλογές για τον γενετικό αλγόριθμο
options = optimoptions('ga', ...
    'PopulationSize',200, ...
    'ConstraintTolerance', 1e-6, ... % Ανοχή περιορισμών
    'PlotFcn', @gaplotbestf); % Σχεδίαση της βέλτιστης τιμής σε κάθε γενιά

% Εκτέλεση του γενετικού αλγορίθμου
[x, fval, exitflag, output, population, scores] = ...
    ga(obj_fun, 17, [], [], Aeq, beq, lower_bounds, upper_bounds, [], options);

% Ορισμός ορίων για τον άξονα Υ στο γράφημα
ylim([0, 1800]);
